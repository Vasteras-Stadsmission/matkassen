# Systemd override for nginx service to improve resilience
# This file should be deployed to /etc/systemd/system/nginx.service.d/override.conf

[Service]
# Restart nginx automatically on failure
Restart=on-failure

# Wait 10 seconds before restarting to avoid rapid restart loops
RestartSec=10

# Try to restart up to 5 times within 10 minutes
StartLimitInterval=600
StartLimitBurst=5

# Kill any remaining processes if stop takes too long
KillMode=mixed
TimeoutStopSec=30

# Ensure nginx starts after network is available
After=network-online.target
Wants=network-online.target
