# Local Development Configuration
# This file answers: "What do I need to configure to develop this app locally?"
# For production deployment variables, see docker-compose files and CI/CD workflows.

# Authentication - GitHub OAuth App
AUTH_GITHUB_ID="your_github_oauth_app_id"
AUTH_GITHUB_SECRET="your_github_oauth_app_secret"
AUTH_SECRET="generate_with_npx_auth_secret"
AUTH_TRUST_HOST=true

# GitHub Organization Access Control
GITHUB_ORG="vasteras-stadsmission"

# GitHub App for Organization Membership Checks
AUTH_GITHUB_APP_ID="your_github_app_id"
AUTH_GITHUB_APP_INSTALLATION_ID="your_installation_id"
AUTH_GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nyour_private_key_here\n-----END RSA PRIVATE KEY-----"

# Database
POSTGRES_USER="pgadmin"
POSTGRES_PASSWORD="your_secure_password"
POSTGRES_DB="matkassen"

# For development (pnpm run dev: host processes connecting to DB in container)
# Note: In containerized environments, DATABASE_URL is overridden in Docker Compose files
DATABASE_URL="postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:5432/${POSTGRES_DB}"

# SMS Configuration (HelloSMS)
# Note: Credentials are optional in staging/test environments when HELLO_SMS_TEST_MODE=true
HELLO_SMS_USERNAME="your_username_here"
HELLO_SMS_PASSWORD="your_password_here"
# HELLO_SMS_TEST_MODE=true # Optional: Enable test mode (defaults to true in dev, false in production)
# When test mode is enabled, SMS credentials are not required (returns fake success responses)

# SMS Scheduler Configuration
SMS_SEND_INTERVAL="5 minutes" # How often to send queued SMS (human-readable: "5 minutes", "30 seconds", "1 hour")
# Environment-specific examples:
#   Production: "5 minutes" (default - balance between timely delivery and API rate limits)
#   Staging: "30 seconds" (fast testing - quick feedback during QA)
#   Local dev: "10 seconds" (immediate testing - instant verification during development)

# Optional: Override SMS sender name (defaults to BRAND_NAME, max 11 chars for HelloSMS)
# NEXT_PUBLIC_SMS_SENDER="YourSender"

# SMS Callback Webhook Secret (REQUIRED for production)
# This secret is part of the callback URL that HelloSMS calls for delivery status updates.
# Generate with: npx nanoid --size 32
# Then provide the full callback URL to HelloSMS support:
#   https://yourdomain.com/api/webhooks/sms-status/{SMS_CALLBACK_SECRET}
# SECURITY: The secret lives in the URL path. Treat access logs as sensitive.
# If the secret is ever exposed, generate a new one and update HelloSMS config.
SMS_CALLBACK_SECRET="generate_with_npx_nanoid_size_32"

# SMS Health Report Configuration
# Daily report to Slack when there are SMS delivery issues (failures, stale unconfirmed)
# Only sends if there are problems - stays silent when everything is healthy
SMS_REPORT_SCHEDULE="0 8 * * *" # Cron syntax: 8:00 AM daily (server timezone)

# Logging Configuration
# LOG_LEVEL="info" # Optional: Override log level (debug, info, warn, error, fatal). Defaults: development=debug, production=info

# Optional: White-label configuration (only needed if branding differs from defaults)
# These are set automatically in production via CI/CD workflows
# NEXT_PUBLIC_BRAND_NAME="Matcentralen"
# NEXT_PUBLIC_BASE_URL="https://matcentralen.com"

# Household Anonymization Scheduler
# Automatically anonymizes households that have been inactive for the specified duration (GDPR compliance)
ANONYMIZATION_SCHEDULE="0 2 * * 0" # Cron syntax: Sunday at 2:00 AM (minute hour day-of-month month day-of-week)
ANONYMIZATION_INACTIVE_DURATION="1 year" # Duration: human-readable strings like "1 year", "5 minutes", "30 seconds"
# Environment-specific examples:
#   Production: "1 year" (GDPR compliance - anonymize households inactive for 365.25 days)
#   Staging: "5 minutes" (fast testing - verifies anonymization runs quickly)
#   Local dev: "30 seconds" (immediate testing - instant feedback during development)
# NOTE: ms library does NOT support "months" - use "1 year" or "365 days" instead
# To disable anonymization temporarily: set schedule to "0 0 31 2 *" (Feb 31st = never runs)

# Database Backup Encryption (GDPR Compliance - PRODUCTION ONLY)
# Passphrase for encrypting/decrypting database backups using GPG symmetric encryption
# CRITICAL: Store the actual value in GitHub Secrets (DB_BACKUP_PASSPHRASE)
# Never commit the real passphrase to version control
# Minimum recommended length: 32 characters (use strong random passphrase)
# Used by: scripts/db-backup.sh and scripts/db-restore.sh
# NOTE: Backups are disabled on staging - this secret is only exported in production
DB_BACKUP_PASSPHRASE="generate_strong_random_passphrase_min_32_chars"

# Production/Deployment Variables (automatically set by deploy.sh/update.sh)
# These are documented here for reference but not needed for local development
# AUTH_URL="https://yourdomain.com/api/auth" # Auth.js canonical URL
# AUTH_REDIRECT_PROXY_URL="https://yourdomain.com/api/auth" # Auth.js redirect proxy
# DATABASE_URL_EXTERNAL="postgres://user:pass@host:5432/db" # External DB access URL
# EMAIL="admin@yourdomain.com" # Admin email for SSL certificates (Certbot)
# ENV_NAME="production" # Environment identifier (production/staging)
